{"version":3,"sources":["services/persons.js","components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","newObject","post","id","delete","concat","put","Filter","_ref","onChangeHandler","react_default","a","createElement","onChange","PersonForm","onSubmitHandler","newName","onChangeNameHandler","newNumber","onChangeNumberHandler","onSubmit","value","type","Persons","persons","onDelete","Fragment","map","pers","key","name","number","onClick","window","confirm","Notification","message","className","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","searchName","setSearchName","_useState9","_useState10","showAll","setShowAll","_useState11","_useState12","notificationMessage","setNotificationMessage","_useState13","_useState14","errorMessage","setErrorMessage","useEffect","personService","initialPersons","contactsToShow","filter","person","toFilter","toLocaleLowerCase","toSearch","toLowerCase","includes","components_Notification","components_Filter","event","target","components_PersonForm","preventDefault","toUpdate","p","length","objectSpread","updatedPerson","updatedState","toConsumableArray","setTimeout","catch","error","returnedPerson","undefined","find","el","alert","components_Persons","updatedPersons","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.ebf80c49.chunk.js","sourcesContent":["import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then(response => response.data);\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then(response => response.data)\n}\n\nconst remove = id => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request;\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then(response => response.data)\n}\n\nexport default {\n  getAll,\n  create,\n  remove,\n  update\n}\n","import React from 'react';\n\nconst Filter = ({ onChangeHandler}) => (\n  <p>\n    Filter show with\n    <input onChange={onChangeHandler} />\n  </p>\n);\n\nexport default Filter;","import React from 'react';\n\nconst PersonForm = ({\n  onSubmitHandler,\n  newName,\n  onChangeNameHandler,\n  newNumber,\n  onChangeNumberHandler,\n}) => {\n  return (\n    <form onSubmit={onSubmitHandler}>\n      <div>\n        name:\n        <input \n          value={newName}\n          onChange={onChangeNameHandler}\n        />\n      </div>\n      <div>\n        number:\n        <input\n          value={newNumber}\n          onChange={onChangeNumberHandler}\n        />\n      </div>\n      <div>\n        <button type='submit'>add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from 'react';\n\nconst Persons = ({ persons, onDelete }) => {\n  function confirmDelete(id, name) {\n    if(window.confirm(`Delete ${name}?`)) {\n      onDelete(id);\n    }\n    return;\n  }\n\n  return(\n    <>\n      {persons.map(pers => (\n        <p key={pers.id}>\n          {pers.name} {pers.number}\n          <button onClick={() => confirmDelete(pers.id, pers.name)}>delete</button>\n        </p>\n      ))}\n    </>\n  );\n}\nexport default Persons;","import React from 'react';\n\nconst Notification = ({ message, type }) => {\n  if (message === null) {\n    return null;\n  }\n  if (type === 'error') {\n    return (\n      <div className=\"notification notification-error\">\n      {message}\n    </div>\n    )\n  }\n\n  return (\n    <div className=\"notification\">\n      {message}\n    </div>\n  )\n}\n\nexport default Notification;","import React, { useState, useEffect } from 'react';\n\nimport personService from './services/persons';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport Notification from './components/Notification';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [searchName, setSearchName] = useState('');\n  const [showAll, setShowAll] = useState(true);\n  const [notificationMessage, setNotificationMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons);\n      });\n  }, []);\n\n  const contactsToShow = showAll\n    ? persons\n    : persons.filter(person => {\n        let toFilter = person.name.toLocaleLowerCase();\n        let toSearch = searchName.toLowerCase()\n        return toFilter.includes(toSearch);\n      });\n\n  const _isAdded = (name, data) => {\n    let isAdded = data.find(el => el.name === name);\n    if (isAdded === undefined) {\n      return false;\n    }\n    return true;\n  }\n\n  const addContact = event => {\n    event.preventDefault();\n    // Check if the contact already exists\n    const toUpdate = persons.filter(p => {\n      return p.name.includes(newName);\n    });\n    if (toUpdate.length === 1) {\n      const confirm = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`);\n      if (confirm) {\n        personService\n          .update(toUpdate[0].id, {\n            ...toUpdate[0],\n            number: newNumber\n          })\n          .then(updatedPerson => {\n            let updatedState = persons.filter(p => p.id !== updatedPerson.id);\n            updatedState = [...updatedState, updatedPerson];\n            setPersons(updatedState);\n            setNewName('');\n            setNewNumber('');\n            setNotificationMessage(`Added ${updatedPerson.name}`);\n            setTimeout(() => {\n              setNotificationMessage(null)\n            }, 2000);\n          })\n          .catch(error => {\n            setErrorMessage(`Information of ${newName} has already been removed from server`);\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000);\n          })\n      }\n    } else {\n      // if not, save the person\n      const personObject = {\n        name: newName,\n        number: newNumber,\n      }\n\n      personService\n        .create(personObject)\n        .then(returnedPerson => {\n          if (_isAdded(newName, persons)) {\n            alert(`${newName} is already added to phonebook`);\n          }\n          else {\n            setPersons([...persons, { name: newName, number: newNumber }]);\n          }\n          setNotificationMessage(`Added ${newName}`);\n          setTimeout(() => {\n            setNotificationMessage(null)\n          }, 2000);\n          setNewName('');\n          setNewNumber('');\n        })\n        .catch(error => {\n          setErrorMessage(`${error.response.data.error}`);\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000);\n        })\n    }\n  }\n\n  const deletePerson = id => {\n    personService\n      .remove(id)\n      .then(() => {\n        const updatedPersons = persons.filter(p => p.id !== id);\n        setPersons(updatedPersons);\n      })\n  }\n\n  const handleContactChange = event => {\n    setNewName(event.target.value);\n  }\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  }\n\n  const handleSearchName = event => {\n    setSearchName(event.target.value);\n    setShowAll(false);\n  }\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification type=\"error\" message={errorMessage} />\n      <Notification message={notificationMessage} />\n      <Filter onChangeHandler={handleSearchName} />\n      <h2>Add a new</h2>\n      <PersonForm\n        onSubmitHandler={addContact}\n        newName={newName}\n        onChangeNameHandler={handleContactChange}\n        newNumber={newNumber}\n        onChangeNumberHandler={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        persons={contactsToShow}\n        onDelete={deletePerson}\n      />\n    </div>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}